<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../img/favicon.gif" />
<title>jQuery Textarea Counters</title>
<style type="text/css">
textarea
{
	height:100px;
	width:500px;
	resize: none;
}
</style>
<script type="text/javascript" src="../js/jquery-1.8.3.js"></script>
<script type="text/javascript">
$(document).ready(function()  {
	$("#letter_counter").html("Length of text is <strong>0</strong> characters");
    $("#text_letter").keyup(function(){
		var len = ($(this).val()).length;
		$("#letter_counter").html("Length of text is <strong>"+ len +"</strong> characters");
    });
    
    var char_limit = 20;
    $("#letter_limit_counter").html("You have <strong>" + char_limit + "</strong> characters remaining");
    $("#letter_limit").attr("maxlength", char_limit);
    $("#letter_limit").keyup(function(){
		if($(this).val().length > char_limit){
			$(this).val($(this).val().substr(0, char_limit));
		}

		if ($(this).val().length >= (char_limit - 5)) {
			$("#letter_limit_counter").css("color", "red");
		} else {
			$("#letter_limit_counter").css("color", "black");
		}
		var len = char_limit - $(this).val().length;
		$("#letter_limit_counter").html("You have <strong>"+ len +"</strong> characters remaining");
    });
    
	$("#word_counter").html("Length of text is <strong>0</strong> words");
    $("#text_word").keyup(function(){
		if (($(this).val()) == "") {
			$("#word_counter").html("Length of text is <strong>0</strong> words");
		} else {
			var word = $.trim($(this).val()).split(" ").length + $.trim($(this).val()).split("\n").length - 1;
			$("#word_counter").html("Length of text is <strong>"+ word +"</strong> words");
		}
    });
    
    var words = 10
    $("#word_limit_counter").html("You have <strong>" + words + "</strong> words remaining");
    $("#word_limit").keyup(function(){
		if ($(this).val() == "") {
			var word = words;
		} else {
			var value = $(this).val();
			var new_value = value.replace(/\n/g," ");
			word = words - ($.trim(new_value).split(" ").length);
		}
		if (($.trim(new_value).split(" ").length) >= words) {
			content = $.trim($(this).val()).split(" ");
			content = content.join(" ");
			$(this).val(content);
		}
		$("#word_limit_counter").html("You have <strong>"+ word +"</strong> words remaining");
    });
    
	$("#line_counter").html("Length of text is <strong>0</strong> lines");
    $("#text_line").keyup(function(){
		if (($(this).val()) == "") {
			$("#line_counter").html("Length of text is <strong>0</strong> lines");
		} else {
			var line = $.trim($(this).val()).split("\n").length;
			$("#line_counter").html("Length of text is <strong>"+ line +"</strong> lines");
		}
    });
    
    var lines = 5
    $("#line_limit_counter").html("You have <strong>" +  lines + "</strong> lines remaining");
    $("#line_limit").keydown(function(e){
		if (($(this).val()) == "") {
			$("#line_limit_counter").html("You have <strong>" +  lines + "</strong> lines remaining");
		} else {
			var line = lines - ($(this).val().split("\n").length);
			$("#line_limit_counter").html("You have <strong>"+ line +"</strong> lines remaining");
		}
		if(e.keyCode == 13 && $(this).val().split("\n").length >= lines) {
            return false;
        }
    });
});
</script>
</head>
<body>
	<table width="100%">
		<tr>
			<td>
				<h3>Textarea letter counter</h3>
				<textarea id="text_letter"></textarea><br /><br />
				<div id="letter_counter"></div>
			</td>
			<td>
				<h3>Textarea letter limit counter - 20 characters</h3>
				<textarea id="letter_limit"></textarea><br /><br />
				<div id="letter_limit_counter"></div>
			</td>
		</tr>
		<tr>
			<td>
				<h3>Textarea word counter</h3>
				<textarea id="text_word"></textarea><br /><br />
				<div id="word_counter"></div>
			</td>
			<td>
				<h3>Textarea word limit counter - 10 words</h3>
				<textarea id="word_limit"></textarea><br /><br />
				<div id="word_limit_counter"></div>
			</td>
		</tr>
		<tr>
			<td>
				<h3>Textarea line counter</h3>
				<textarea id="text_line"></textarea><br /><br />
				<div id="line_counter"></div>
			</td>
			<td>
				<h3>Textarea line limit counter - 5 lines</h3>
				<textarea id="line_limit"></textarea><br /><br />
				<div id="line_limit_counter"></div>
			</td>
		</tr>
	</table>
</body>
</html>
